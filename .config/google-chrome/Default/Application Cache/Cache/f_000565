function dtg(a,b){return new ko(function(c,d){tp(rk(sk(pk(up(ok(a.C.Ve("/answers/tablemetadata"),"did",b),"POST"),2),function(e){e=(new ik).Pc(aM.xa(),e.Ge());c(e)}),function(){var e=new aM;d(e)})).Pe()})}function etg(a,b,c){var d=new ik;d.Ig=!0;var e=d.serialize(b);return new ko(function(f,h){Tm(c,function(){eM(a,"/dbx/validateCalculatedColumn",[],e,function(k){k=d.Pc(UL.xa(),k.Ge());f(k)},function(){var k=new UL,l=new dg;F(k,1,l);l.Rb(3);WBd(l);h(k)})})})}
function ftg(a,b,c){var d=new ik;d.Ig=!0;var e=d.serialize(b);return new ko(function(f,h){Tm(c,function(){eM(a,"/dbx/refreshObject",a.F?["esid",a.F]:[],e,function(k){d.Ig=!1;k=d.Pc(t5b.xa(),k.Ge());f(k)},function(){var k=new t5b,l=new dg;l.Rb(3);WBd(l);var n=new OL;F(n,1,l);Nf(k,2,n);h(k)})})})}function gtg(a,b){var c=new Set;b.forEach(function(d){a.O.add(d);c.add(d)});W7b(a,c,"dbobjectmodel-event-update")}function htg(a){a.O&&a.O.Vc(a.Ka(),a.L?5:1,new Dl(0,a.L?50:0,12,a.L?0:50))}
function itg(a,b,c,d,e,f,h,k){lO.call(this,a,b,c,d,e,k);this.F=new nqc(h,k);this.Ga(this.F,!0);this.H=f;this.C=null}u(itg,lO);itg.prototype.Ba=function(){var a=this.qa().Ba("DIV","waffle-dbsource-container");this.ib(a)};itg.prototype.Ha=function(){lO.prototype.Ha.call(this);this.C=new LA(this.Ka(),this.qa());MA(this.C)};itg.prototype.vd=function(){pf(this.C);lO.prototype.vd.call(this)};itg.prototype.focus=function(){var a=this.F;a.C.isVisible()&&a.C.isEnabled()&&(a.C.Ka().focus(),a.C.rq(!0));this.H.Rb(2)};
function jtg(a){return a.D?Object.values(a.D).find(function(b){if(!(b instanceof sQ))return!1;b=b.getElement();return!!b&&!!b.querySelector(":hover")})||null:null}function ktg(a){a=jtg(a.J);if(!a)return null;a=a.Od().getId();return ritz_api.BigSheetsApi.getExternalDataIdForObject(a)}
function ltg(a){var b=a.L.C.C;if(XG(b))return ritz_api.BigSheetsApi.getExternalDataIdForDatasourceSheet(b.jb());(b=ktg(a))||(b=(b=rDc(a))?sDc(a,b):null);if(b)return b;a:{b=a.J.C;for(var c=b.length-1;0<=c;c--){var d=LQ(a.J,b[c]).Od();if(d instanceof ON&&null!=d.D&&(d=d.getId(),d=ritz_api.BigSheetsApi.getExternalDataIdForObject(d))){b=d;break a}}b=null}if(b)return b;b=OJ(a.Qa());return sDc(a,b)}
function mtg(a,b){[a.J,a.V].forEach(function(c){return c.setPosition(b)});a.C.some(function(c){c.C.setPosition(b)})}function ntg(){var a=new lB,b="\u7d9a\u884c\u3059\u308b\u306b\u306f\u3001Google Cloud Platform Console \u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002"+(a.cd("a",{"class":"goog-inline-block",href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("\u8a73\u7d30"+a.bd("a")));return a.format(b)}
function otg(a,b){return{title:a,body:b}}function ptg(a){return otg("\u30a8\u30e9\u30fc",a)}
function qtg(a,b){var c=b.getErrorCode();b=E(b,3);switch(c){case 20:return ptg(C1e(3,b));case 6:return a=(new $z("{objectType,select, chart{\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u304c\u30b0\u30e9\u30d5\u3092\u8fd4\u3059\u306e\u306b\u6642\u9593\u304c\u304b\u304b\u308a\u3059\u304e\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002}pivot_table{\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u304c\u30d4\u30dc\u30c3\u30c8 \u30c6\u30fc\u30d6\u30eb\u3092\u8fd4\u3059\u306e\u306b\u6642\u9593\u304c\u304b\u304b\u308a\u3059\u304e\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002}formula{\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u304c\u6570\u5f0f\u306e\u7d50\u679c\u3092\u8fd4\u3059\u306e\u306b\u6642\u9593\u304c\u304b\u304b\u308a\u3059\u304e\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002}record{\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u304c\u62bd\u51fa\u30c7\u30fc\u30bf\u3092\u8fd4\u3059\u306e\u306b\u6642\u9593\u304c\u304b\u304b\u308a\u3059\u304e\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002}datasource_preview{\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u304c\u30d7\u30ec\u30d3\u30e5\u30fc\u3092\u8fd4\u3059\u306e\u306b\u6642\u9593\u304c\u304b\u304b\u308a\u3059\u304e\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002}other{\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u304c\u30c7\u30fc\u30bf\u3092\u8fd4\u3059\u306e\u306b\u6642\u9593\u304c\u304b\u304b\u308a\u3059\u304e\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002}}")).format({objectType:a?L1e[a]||
"other":"other"}),otg("\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u307e\u3057\u305f",D1e(a,b));case 8:return M1e.format(B(z(),"febpr")?5E4:3E4),M1e.format(B(z(),"femdrr")?5E4:1E4),c=(new $z("{objectType,select, chart{\u7d50\u679c\u304c {MAX_ROWS} \u884c\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\u3002\u30b0\u30e9\u30d5\u3092\u66f4\u65b0\u3057\u3066\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002}pivot_table{\u30d5\u30a3\u30eb\u30bf\u306e\u9069\u7528\u3001\u30b0\u30eb\u30fc\u30d7\u5316\u3001\u884c\u6570\u3084\u5217\u6570\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3092\u3059\u308b\u3053\u3068\u3067\u3001\u884c\u6570\u3001\u5217\u6570\u306e\u3044\u305a\u308c\u304b\u307e\u305f\u306f\u4e21\u65b9\u304c {DB_PIVOT_TABLE_MAX_ROWS} \u4ee5\u4e0b\u306b\u306a\u308b\u3088\u3046\u306b\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u305d\u306e\u5f8c\u3001\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002}formula{\u7d50\u679c\u304c {MAX_ROWS} \u884c\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\u3002\u95a2\u6570\u3092\u66f4\u65b0\u3057\u3066\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002}record{\u7d50\u679c\u304c {DB_RECORD_MAX_ROWS} \u884c\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\u3002\u62bd\u51fa\u30c7\u30fc\u30bf\u3092\u66f4\u65b0\u3057\u3066\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002}datasource_preview{\u7d50\u679c\u304c {MAX_ROWS} \u884c\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\u3002\u63a5\u7d9a\u30b7\u30fc\u30c8\u3092\u66f4\u65b0\u3057\u3066\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002}other{\u7d50\u679c\u304c {MAX_ROWS} \u884c\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\u3002\u30af\u30a8\u30ea\u3092\u66f4\u65b0\u3057\u3066\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002}}")).format({objectType:a?
L1e[a]||"other":"other"}),otg(1==a?"\u884c\u6570\u3001\u5217\u6570\u306e\u3044\u305a\u308c\u304b\u307e\u305f\u306f\u4e21\u65b9\u304c\u4e0a\u9650\u3092\u8d85\u3048\u3066\u3044\u307e\u3059":"\u884c\u6570\u304c\u591a\u3059\u304e\u307e\u3059",D1e(c,b));case 18:return otg("\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u30bf\u30a4\u30d7",U_("\u30af\u30a8\u30ea\u306e\u7d50\u679c\u3001\u73fe\u5728\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044 ARRAY \u578b\u3084 STRUCT \u578b\u304c\u8fd4\u3055\u308c\u307e\u3059\u3002"));
case 19:return ptg(G1e());case 22:return ptg(H1e());case 26:return ptg(U_("\u63a5\u7d9a\u30c7\u30fc\u30bf\u306e\u5217\u306e\u578b\u306f\u3053\u306e\u64cd\u4f5c\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u305b\u3093\u3002"));case 30:return ptg(U_("\u63a5\u7d9a\u3055\u308c\u305f\u30b7\u30fc\u30c8\u3068\u62bd\u51fa\u30c7\u30fc\u30bf\u3067\u306f\u3001\u914d\u5217\u306e\u5217\u306b\u3088\u308b\u4e26\u3079\u66ff\u3048\u306f\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"));case 32:return otg("\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u305f\u884c\u6570\u3068\u5217\u6570\u304c\u591a\u3059\u304e\u307e\u3059",
U_("\u30d4\u30dc\u30c3\u30c8 \u30c6\u30fc\u30d6\u30eb\u306b\u306f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u914d\u5217\u306e\u5217\u304c 1 \u3064\u4ee5\u4e0a\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\u884c\u6570\u307e\u305f\u306f\u5217\u6570\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u308b\u306e\u306f 1 \u3064\u306e\u307f\u3067\u3059\u3002"))}return ptg(I1e(b))}
function rtg(){var a='<div class="'+U("waffle-bigquerydbsourcesettingsdialog-project-section")+'"><h3 class="'+U("waffle-bigquerydbsourcesettingsdialog-project-header")+'">';a=a+'\u30af\u30e9\u30a6\u30c9 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u629e</h3><div class="'+(U("waffle-bigquerydbsourcesettingsdialog-project-menu-wrapper")+'"></div></div>');return T(a)}
function stg(){var a='<div class="'+U("waffle-bigquerydbsourcesettingsdialog-footer-wrapper")+'"><p class="'+U("waffle-bigquerydbsourcesettingsdialog-footer-message")+'">';return T(a+'BigQuery \u306e\u5229\u7528\u306b\u306f <a href="https://cloud.google.com/terms/" target="_blank">Google Cloud Platform \u5229\u7528\u898f\u7d04</a>\u304c\u9069\u7528\u3055\u308c\u307e\u3059\u3002</p></div>')};function ttg(a,b,c){b0.call(this,"waffle-bigquerydbsourcesettingsdialog",c);this.setTitle(this.qa().Ba("SPAN",void 0,"\u30c7\u30fc\u30bf\u63a5\u7d9a\u306e\u8ffd\u52a0"));this.H=a;this.F=b;this.D=new F2e(void 0,this.qa());this.Ga(this.D)}u(ttg,b0);
ttg.prototype.Ba=function(){b0.prototype.Ba.call(this);lx(this.Ib(),rtg);T_(this).appendChild(nx(stg));this.D.render(this.hb("waffle-bigquerydbsourcesettingsdialog-project-menu-wrapper"));(this.D.Ji||null).setAttribute("placeholder","\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u691c\u7d22");this.qa().uj(this.D.Ka(),!1)};ttg.prototype.Ha=function(){var a=this;b0.prototype.Ha.call(this);this.D.Om(!0);s2e(this.H).then(function(b){b&&0!=b.length||a.F.C(36566);utg(a,b);a.D.Om(!1)},function(){a.reject(!0)})};
function utg(a,b){if(0==b.length){var c=a.qa(),d=go(c,ntg());Q(a.Ea("waffle-bigquerydbsourcesettingsdialog-project-menu-wrapper"),!1);c.appendChild(a.Ea("waffle-bigquerydbsourcesettingsdialog-project-section"),c.Ba("DIV","waffle-bigquerydbsourcesettingsdialog-error-caption",d))}else vtg(a,b),a.getHandler().listen(a.D,"action",function(e){return wtg(a,e,b)})}
function vtg(a,b){b=xtg(b);H2e(a.D,b);M2e(a.D);b=a.D;var c="\u4e0a\u4f4d "+(fqc.format(1E4)+" \u500b\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u3002\uff0a\u30ea\u30b9\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u691c\u7d22\u3059\u308b\u306b\u306f\u3001\u691c\u7d22\u30d0\u30fc\u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002");b.C.setVisible(!0);b.C.C.setContent(b.qa().Ba("DIV",void 0,b.qa().Ba("DIV",
{id:"waffle-dataconnector-tablepicker-filtered-menu-info-bubble-aria-content","class":"waffle-dataconnector-tablepicker-filtered-menu-info-bubble-content"},In(ke(c)))));I2e(a.D)}function xtg(a){return Hc(a,function(b){return new $_(b.getId(),b.getName())})}function wtg(a,b,c){b=b.target.Qa();var d=b instanceof $_?b.dh():b.getValue();Aw(a.Ka(),"waffle-bigquerydbsourcesettingsdialog-transition-out");a.D.YY("translateX(-24px)").then(function(){return a.resolve(new r2e(c,d,d,"db-source-table"))})};function ytg(a){a=a.wn;var b='<div class="waffle-calculated-columns-description">\u8a08\u7b97\u3055\u308c\u305f\u5217\u3092\u4f7f\u7528\u3059\u308b\u3068\u3001\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u306e\u95a2\u6570\u3068\u3001\u63a5\u7d9a\u30b7\u30fc\u30c8\u306e\u73fe\u5728\u306e\u30c7\u30fc\u30bf\u3092\u4f7f\u7528\u3057\u3066\u65b0\u3057\u3044\u5217\u3092\u4f5c\u6210\u3057\u3001\u3088\u308a\u512a\u308c\u305f\u5206\u6790\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002<div class="waffle-calculated-columns-tooltip"></div></div><div class="waffle-calculated-columns-display-name-title" id="waffle-calculated-columns-display-name-title">\u8a08\u7b97\u3055\u308c\u305f\u5217\u306e\u540d\u524d</div>';
a&&(b+='<div class="waffle-calculated-columns-column-names-menu-title">\u5217\u540d</div><div class="waffle-calculated-columns-column-names-menu"></div>');b+=S($2e({ld:"waffle-calculated-columns-display-name-input",maxLength:50}))+'<div class="waffle-calculated-columns-display-name-error"></div><div class="waffle-calculated-columns-formula-editor"></div>';return T(b)};function ztg(){var a=T;var b=T('<svg class="waffle-calculated-columns-tooltip-help-icon" xmlns="http://www.w3.org/2000/svg" width="18px" height="18px" viewBox="0 0 24 24" fill="#5F6368"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/></svg>');return a('<div class="waffle-calculated-columns-tooltip-container"><div class="waffle-calculated-columns-tooltip-help-button">'+
b+"</div></div>")};function Atg(a,b){R.call(this,b);this.H=new ly(void 0,Ax(jy,"waffle-calculated-columns-tooltip-help-button"),this.qa());this.Ga(this.H);this.C=new Ox(this.qa());this.va(this.C);this.D=null;this.va(this.D);this.F=null;this.O=a;this.L=hy(cy(new Sx,1))}u(Atg,R);
Atg.prototype.Ba=function(){this.ib(nx(ztg));this.H.Wa(this.Ea("waffle-calculated-columns-tooltip-help-button"));this.C.Ic("waffle-calculated-columns-tooltip-help-bubble");this.C.Hp(!1);Px(this.C,!0);this.C.setPosition(1,2,0,-7);this.F=this.qa().Ba("A",{target:"_blank"},"\u8a73\u7d30");te(this.F,"https://connectedsheets.page.link/calccolhelp");var a="="+(ritz_api.RitzModelApi.getLocalizedFunctionName("RIGHT")+"(\u6ce8\u6587 ID, 4)"),b="="+(ritz_api.RitzModelApi.getLocalizedFunctionName("YEAR")+"(\u958b\u59cb\u65e5)");
this.C.setContent(this.qa().Ba("DIV",void 0,this.qa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-title",In(ke("\u3053\u308c\u3089\u306e\u6570\u5f0f\u3092\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044"))),this.qa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-subtitle",In(ke("\u57fa\u672c\u7684\u306a\u8a08\u7b97\u3092\u884c\u3046"))),this.qa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-example",In(ke("=(\u4fa1\u683c * \u6570\u91cf)/0.5"))),this.qa().Ba("DIV",
"waffle-calculated-columns-tooltip-help-bubble-subtitle",In(ke("\u30c6\u30ad\u30b9\u30c8\u3092\u64cd\u4f5c"))),this.qa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-example",In(ke(a))),this.qa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-subtitle",In(ke("\u65e5\u4ed8\u3092\u4f7f\u7528"))),this.qa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-example",In(ke(b))),this.qa().Ba("DIV","waffle-calculated-columns-tooltip-help-bubble-link",this.F)));this.C.render();a=
this.C.Ka();this.qa().uj(a,!0);tw(a,"hidden",!1);this.C.setVisible(!1)};
Atg.prototype.Ha=function(){var a=this;R.prototype.Ha.call(this);var b=this.Ea("waffle-calculated-columns-tooltip-help-button");this.C.gi(this.qa().Vt(b));ww(b,"\u3053\u308c\u3089\u306e\u6570\u5f0f\u3092\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044");Hy(b,"\u30b5\u30dd\u30fc\u30c8",void 0);OEe(b);this.getHandler().listen(this.H,"action",this.J).listen(this.C.getElement(),"keydown",this.R).listen(this.C,"hide",function(){return Cw(a.Ka(),"waffle-calculated-columns-tooltip-help-bubble-visible")}).listen(this.F,
"click",function(){a.O.C(36653,a.L)})};Atg.prototype.R=function(a){27===a.keyCode&&(this.J(),this.Ea("waffle-calculated-columns-tooltip-help-button").focus())};Atg.prototype.J=function(){var a=!w6a(this.C.D);Ew(this.Ka(),"waffle-calculated-columns-tooltip-help-bubble-visible",a);this.C.setVisible(a);pf(this.D);a?(this.O.C(36652,this.L),this.D=new LA(this.C.Ka(),this.qa()),this.va(this.D),MA(this.D),this.C.getElement().focus()):this.Ea("waffle-calculated-columns-tooltip-help-button").blur()};function Btg(a,b){this.D=b;this.C=new Map;Ctg(this,a)}function Dtg(a){return a.replace(/^[\t\r\n]+|[\t\r\n]+$/g,"").replace(/[\t\r\n]+/g," ")}function Ctg(a,b){b=b.map(function(c){return hM(c)});a.C=new Map(b.map(function(c){return[jJ(c,a.D),c]}))}function Etg(a){var b=[];a.C.forEach(function(c,d){Lf(c,2)||b.push(d)});return b}function Ftg(a){var b=[];a.C.forEach(function(c,d){b.push(d)});return b};function Gtg(a){a=a.F9a;return T('<div class="waffle-calculated-columns-formula-editor-container"><textarea class="'+U("waffle-calculated-columns-formula-editor-input")+" "+U("jfk-textinput")+'" spellcheck="false" placeholder="'+U(a)+'"></textarea></div>')};function Htg(a,b,c,d,e,f,h,k){R.call(this,k);this.J=a;this.Aa=b;this.Fa=c;this.ma=d;this.C=new A_("");this.va(this.C);this.D=null;this.V=null==b?!1:!0;this.R=null;this.Ia=f;this.O=this.H=!1;this.Ca=e;this.L=h}u(Htg,R);Htg.prototype.Ba=function(){R.prototype.Ba.call(this);this.ib(nx(Gtg,{F9a:"=\u3053\u3053\u306b\u6570\u5f0f\u3092\u5165\u529b"}))};
Htg.prototype.Ha=function(){R.prototype.Ha.call(this);var a=this.C;a.Vaa=290;a.resize();a=this.Ea("waffle-calculated-columns-formula-editor-input");this.C.Wa(a);tw(a,"label","\u6570\u5f0f\u30a8\u30c7\u30a3\u30bf");this.D=new wA(a);null!=this.Aa&&this.C.setValue(ritz_api.BigSheetsApi.getCalculatedColumnFormulaString((new ik).serialize(this.Aa),this.J));this.C.Na(this.ma);this.ma&&this.getHandler().listen(this.D,"input",this.F)};Htg.prototype.vd=function(){R.prototype.vd.call(this);pf(this.D)};
Htg.prototype.F=function(){if(this.H)this.O=!0,this.dispatchEvent(new Itg("loading-state"));else{var a=this.Ca.getRitzCalculatedColumnFormulaValidationResult(this.J,Jtg(this),Ftg(this.Fa));a=(new ik).Pc(b6b.xa(),a);switch(a.getStatus()){case 4:this.L.C(36699);break;case 12:this.L.C(36701);break;case 7:var b=new Rme;var c=Lf(a,5)?E(a,5):"CUSTOM_OR_NON_ENGLISH_FUNCTION";b=M(b,1,c);c=new kj;b=Mi(c,27,b);b=hy(gy(cy(new Sx,1),b));this.L.C(36700,b)}1!=a.getStatus()?(a=E(a,4),Ktg(this,!1,a)):(a=E(a,2),0==
Pf(a,1).length?Ktg(this,!0,null):Ltg(this,a))}};function Ltg(a,b){a.H=!0;a.dispatchEvent(new Itg("loading-state"));var c=new Z5b;F(c,2,a.J);F(c,1,b);etg(dM.getInstance(),c,a.Ia).then(function(d){d=d.Jh();3==d.getState()?(d="BigQuery \u30a8\u30e9\u30fc: "+E(d,3),Ktg(a,!1,d)):Ktg(a,!0,null);Mtg(a)},function(){Ktg(a,!1,"\u6570\u5f0f\u3092\u691c\u8a3c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f");Mtg(a)})}function Mtg(a){a.H=!1;a.O&&(a.O=!1,a.F())}
function Ktg(a,b,c){a.V=b;a.R=c;a.dispatchEvent(new Itg("validation-update"))}function Jtg(a){a=a.C.getValue();return IE(sga(a))?a:"="+a}function Ntg(a,b){Ew(a.C.getElement(),"waffle-calculated-columns-formula-editor-input-invalid",!b)}function Itg(a,b){Zm.call(this,a,b)}u(Itg,Zm);function Otg(a,b,c,d,e){AK.call(this,153);this.L=a;this.O=b;this.J=c||"";this.F=d;this.C=e}u(Otg,AK);Otg.prototype.yd=function(){var a=new IJb;F(a,1,this.L);F(a,4,this.O);F(a,3,this.J);F(a,2,this.F);for(var b=0;b<this.C.length;b++)Nf(a,5,this.C[b]);return a};function Ptg(a,b,c){b=c||b;return T('<div class="'+U("waffle-calculated-columns-validation-widget")+'"><div class="'+U("waffle-calculated-columns-validation-widget-open-button")+'"><div class="'+U("waffle-calculated-columns-validation-widget-spinner")+'">'+S(dMe({Wb:!0},b))+"</div>"+S(cLe())+S(aLe())+S(bLe())+'</div><div class="'+U("waffle-calculated-columns-validation-widget-bar")+'"><div class="'+U("waffle-calculated-columns-validation-widget-spinner")+'">'+S(dMe({Wb:!0},b))+"</div>"+S(cLe())+S(aLe())+
S(bLe())+'<div class="'+U("waffle-calculated-columns-validation-widget-message")+'"></div><div class="'+U("waffle-calculated-columns-validation-widget-close-button")+'">'+S(ZKe(null,b))+"</div></div></div>")};function Qtg(a,b,c){R.call(this,c);this.H=a;this.L=b;this.J=hy(cy(new Sx,1));this.D=new ly(void 0,Ax(jy,"waffle-calculated-columns-validation-widget-open-button"),this.qa());this.Ga(this.D);this.C=new ly(void 0,Ax(jy,"waffle-calculated-columns-validation-widget-close-button"),this.qa());this.Ga(this.C);this.F=!1}u(Qtg,R);Qtg.prototype.Ba=function(){this.ib(nx(Ptg));this.C.Wa(this.Ea("waffle-calculated-columns-validation-widget-close-button"));this.D.Wa(this.Ea("waffle-calculated-columns-validation-widget-open-button"))};
Qtg.prototype.Ha=function(){var a=this;R.prototype.Ha.call(this);this.D.Id("\u6570\u5f0f\u691c\u8a3c\u30a6\u30a3\u30b8\u30a7\u30c3\u30c8\u3092\u8868\u793a");this.C.Id("\u6570\u5f0f\u691c\u8a3c\u30a6\u30a3\u30b8\u30a7\u30c3\u30c8\u3092\u9589\u3058\u308b");this.D.Na(this.H);this.D.setVisible(this.H);this.getHandler().listen(this.C,"action",function(){return a.setVisible(!1)}).listen(this.D,"action",function(){a.setVisible(!0);a.L.C(36654,a.J);var b=a.Ea("waffle-calculated-columns-validation-widget-message");
xK(Xn(b))});Rtg(this)};Qtg.prototype.setVisible=function(a){this.F=a;this.Eb()&&Ew(this.Ka(),"waffle-calculated-columns-validation-widget-visible",this.F)};Qtg.prototype.isVisible=g("F");
function Rtg(a){Cw(a.Ka(),"waffle-calculated-columns-validation-widget-valid");Cw(a.Ka(),"waffle-calculated-columns-validation-widget-invalid");Cw(a.Ka(),"waffle-calculated-columns-validation-widget-loading");var b="\u6b21\u306e\u4f8b\u3092\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044: ="+(ritz_api.RitzModelApi.getLocalizedFunctionName("ROUND")+"(<BigQuery \u306e\u5217\u306e\u540d\u524d>, 2) * 5");Stg(a,b);a.D.Id("\u6570\u5f0f\u691c\u8a3c\u30a6\u30a3\u30b8\u30a7\u30c3\u30c8\u3092\u8868\u793a")}
function Stg(a,b){var c=a.Ea("waffle-calculated-columns-validation-widget-message");b=ke(b);re(c,b);a.F&&xK(Xn(c))};function Ttg(a,b,c,d,e,f,h,k,l){rA.call(this);this.ma=a;this.xe=new Atg(l,this.qa());this.Ga(this.xe);this.R=b;if(null==b)b=null;else{var n=new fg;F(n,2,b);b=n}this.V=b;this.Za=c;this.Ia=d;this.H=e;this.F=new PV("\u540d\u524d\u3092\u5165\u529b");this.Aa=null;this.C=new Htg(a,this.V,d,e,h,k,l,this.qa());this.O=new Qtg(e,l,this.qa());this.Ga(this.O);this.L=null;e&&(this.L=new H_(void 0,this.qa()),this.Ga(this.L));this.Xa=f;this.Ua=l;this.Ra=hy(cy(new Sx,1))}u(Ttg,rA);p=Ttg.prototype;p.Ja=function(){rA.prototype.Ja.call(this)};
p.Ba=function(){rA.prototype.Ba.call(this);var a=null==this.R?"\u8a08\u7b97\u3055\u308c\u305f\u5217\u3092\u8ffd\u52a0":this.H?"\u8a08\u7b97\u3055\u308c\u305f\u5217\u306e\u7de8\u96c6":"\u8a08\u7b97\u3055\u308c\u305f\u5217\u306e\u8868\u793a";this.setTitle(a);Aw(Tw(this),"waffle-calculated-columns-dialog");var b=new Ww;b.set("cancel","\u30ad\u30e3\u30f3\u30bb\u30eb",!1,!0);this.H&&b.set("save",null==this.R?"\u8ffd\u52a0":"OK",!0,!1);Zw(this,b);jx(this,"save");(b=H6a(this))&&ww(b,a);a=nx(ytg,{wn:this.H});
b=this.Ib();this.qa().appendChild(b,a);this.xe.render(this.Ea("waffle-calculated-columns-tooltip"));this.C.render(this.Ea("waffle-calculated-columns-formula-editor"));this.O.render(this.Ea("waffle-calculated-columns-formula-editor"));this.H&&this.L.render(this.Ea("waffle-calculated-columns-column-names-menu"))};
p.Ha=function(){rA.prototype.Ha.call(this);Ew(Tw(this),"waffle-calculated-columns-dialog-view-only",!this.H);var a=this.qa().Ea("waffle-calculated-columns-display-name-input");this.F.Wa(a);this.F.Na(this.H);this.Aa=new wA(a);var b=this.qa().Ea("waffle-calculated-columns-display-name-title");tw(a,"labelledby",b.id);null!=this.V&&this.F.setValue(jJ(this.V,this.ma));this.Gva();if(this.H){(this.L.Ji||null).setAttribute("placeholder","\u691c\u7d22");vy(this.L,!1);a=ja(this.Za);for(b=a.next();!b.done;b=
a.next())b=b.value,Lf(hM(b),2)||l0e(this.L,b,this.ma);this.getHandler().listen(this,"dialogselect",this.nLb).listen(this.Aa,"input",this.Gva).listen(this.C,"validation-update",this.Gva).listen(this.C,"loading-state",this.YYb).listen(this.L,"action",this.lgb)}};p.vd=function(){rA.prototype.vd.call(this);pf(this.Aa)};
p.nLb=function(a){var b=this;if("save"==a.key){if(a=Jtg(this.C),!nd(a)){var c=null==this.R;a=new Otg(this.ma,Dtg(this.F.getValue()),this.R,a,Etg(this.Ia));var d=c?36645:36647,e=c?36644:36646;BK(a,function(f){b.Ua.C(f?e:d,b.Ra);f&&b.dispatchEvent(new Utg("update",b.ma,c))});this.Xa.C(a)}}else"cancel"==a.key&&this.Ua.C(36643,this.Ra)};
p.lgb=function(a){var b=a.target.Ag();a=this.C;b=ddc(b);var c=a.C.getElement().selectionStart,d=a.C.getElement().selectionEnd,e=a.C.getValue();a.C.setValue(e.slice(0,c)+b+e.slice(d));b=c+b.length;a.C.getElement().setSelectionRange(b,b);a.F()};
p.Gva=function(){if(0==this.F.getValue().length)var a=null;else a:{var b=this.Ia,c=this.F.getValue();a=this.V;c=Dtg(c);if(nd(c))a="\u8a08\u7b97\u3055\u308c\u305f\u5217\u306e\u540d\u524d\u306f\u7a7a\u767d\u306b\u3067\u304d\u307e\u305b\u3093";else{for(var d=ja(b.C.keys()),e=d.next();!e.done;e=d.next())if(e=e.value,md(e,c))if(d=null!=a,b=b.C.get(e),d&&a.equals(b))break;else{a=c+" \u3068\u3044\u3046\u5217\u540d\u306f\u3059\u3067\u306b\u5b58\u5728\u3057\u307e\u3059";break a}a=null}}b=a;c=!b&&0!=this.F.getValue().length;
a=this.C.V;ax(this.D,"save",a&&c&&this.H);Ew(this.F.getElement(),"waffle-calculated-columns-display-name-input-invalid",!!b);c=b?b:"";b=this.Ea("waffle-calculated-columns-display-name-error");c=ke(c);re(b,c);xK(Xn(b));"="==Jtg(this.C)?(Rtg(this.O),Ntg(this.C,!0)):(b=this.O,c=this.C.R,Cw(b.Ka(),"waffle-calculated-columns-validation-widget-loading"),Ew(b.Ka(),"waffle-calculated-columns-validation-widget-valid",a),Ew(b.Ka(),"waffle-calculated-columns-validation-widget-invalid",!a),d=a?c="\u6570\u5f0f\u306f\u6709\u52b9\u3067\u3059":
"\u6570\u5f0f\u304c\u7121\u52b9\u3067\u3059\u3002\u30af\u30ea\u30c3\u30af\u3057\u3066\u8a73\u7d30\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002",Stg(b,c),b.D.Id(d),Ntg(this.C,a))};
p.YYb=function(){Cw(this.C.C.getElement(),"waffle-calculated-columns-formula-editor-input-invalid");var a=this.O;Aw(a.Ka(),"waffle-calculated-columns-validation-widget-loading");Cw(a.Ka(),"waffle-calculated-columns-validation-widget-valid");Cw(a.Ka(),"waffle-calculated-columns-validation-widget-invalid");a.F&&Stg(a,"");a.D.Id("\u6570\u5f0f\u691c\u8a3c\u30a6\u30a3\u30b8\u30a7\u30c3\u30c8\u3092\u8868\u793a")};function Utg(a,b,c){Zm.call(this,a);this.Hr=b;this.C=c}u(Utg,Zm);function Vtg(a,b,c,d,e,f){CZ.call(this,a,b,c,new kKe,"db",d,e,f);this.H=""}u(Vtg,CZ);p=Vtg.prototype;p.Ha=function(){CZ.prototype.Ha.call(this);this.L$()};p.ZC=function(){return dJ(this.L.C)&&B(z(),"feda")?CZ.prototype.ZC.call(this):!1};p.OFa=function(){TJe(null,null,this.H,this.C)};p.UIa=function(a){TJe(a,null,this.H,this.C)};p.P_=function(){var a=CZ.prototype.P_.call(this);a&&this.ZC()&&this.T3();return a};function Wtg(a,b){a.H!=b&&(a.H=b,a.ZC()&&a.T3())}
p.T3=function(){this.H?Xtg(this):this.EB();UJe(null,this.H,this.C)};function Xtg(a){if(GRe(a)){var b=dM.getInstance(),c=a.R;c.C=a.H;b.D=c;b.C&&b.D.FB(b.C);dtg(b,a.H).then(function(d){for(var e=[],f=ja(Pf(d,1)),h=f.next();!h.done;h=f.next())e.push(h.value.getName());f=[];h=ja(Pf(d,2));for(var k=h.next();!k.done;k=h.next())f.push(k.value.getName());h=[];d=ja(Pf(d,3));for(k=d.next();!k.done;k=d.next())h.push(k.value.getValue());HRe(a,e,f,h,[])},function(){a.EB()})}}
p.EB=function(){CZ.prototype.EB.call(this);this.H="";UJe(null,null,this.C)};function Ytg(a){var b=a.label;a=a.mj;return T((a?'<div class="'+U("goog-menuitem-icon")+" "+U("waffle-charteditor-column-filtered-menu-item-icon")+" "+U(a)+'"></div>':"")+'<span class="'+U("waffle-datasource-configbar-columns-menu-item-label")+'">'+S(b)+"</span>")}function Ztg(){return T('<div class="'+U("waffle-datasource-configbar-columns-menu-spinner-container")+'"></div>')};function $tg(a){uy.call(this,a);this.Ud=new TY(!1);this.va(this.Ud);this.C=new py(nx(Ztg),void 0,this.qa());this.C.Xx(!1);this.Ga(this.C)}u($tg,uy);$tg.prototype.Ha=function(){uy.prototype.Ha.call(this);Aw(this.Ka(),"waffle-datasource-configbar-columns-menu")};$tg.prototype.Ba=function(){uy.prototype.Ba.call(this);this.C.render(this.Ka());this.Ud.render(this.C.Ea("waffle-datasource-configbar-columns-menu-spinner-container"))};
$tg.prototype.D=function(a,b){a=ja(a);for(var c=a.next();!c.done;c=a.next()){var d=c.value;c=C7b(d,b);null!==c&&(d=j0e(d.getType()),this.Ga(new py(nx(Ytg,{label:c,mj:d}),void 0,this.qa()),!0))}};function aug(a,b){var c=a.C.getElement();c&&(Ew(c,"waffle-datasource-configbar-columns-menu-loading",b),Q(c,b),a.Ud.setActive(b))};function bug(){uy.apply(this,arguments)}u(bug,uy);bug.prototype.Ha=function(){uy.prototype.Ha.call(this);Aw(this.Ka(),"waffle-datasource-configbar-formula-menu")};bug.prototype.Is=function(a){var b=this;this.Ga(a,!0);this.getHandler().listen(a,"action",function(){var c=new kH("insert-formula-function");c.ma=a.getValue();b.dispatchEvent(c)})};function cug(a){uy.call(this,a,new dug)}u(cug,uy);cug.prototype.Is=function(a){this.Ga(a,!0)};function dug(){sy.call(this)}u(dug,sy);dug.prototype.LD=function(a){a=sy.prototype.LD.call(this,a);a.push("waffle-dbsource-configbar-overflow-menu");return a};function eug(a,b,c){b=c||b;a='<div class="'+U("waffle-dbsource-configbar-wrapper")+'"><div class="'+U("waffle-dbsource-configbar")+'"><div class="'+U("waffle-dbsource-configbar-header")+'"><div class="'+U("waffle-dbsource-configbar-header-icon")+'">'+S($Ke({color:"#5f6368",sAb:24},b))+'</div><div class="waffle-dbsource-configbar-header-title" role="textbox" tabindex="0" aria-label="';a+=hw("\u63a5\u7d9a\u30b7\u30fc\u30c8\u540d");a+='"></div><div class="waffle-dbsource-configbar-header-subtitle"></div><div class="'+
U("waffle-dbsource-configbar-options-wrapper")+'"><div class="'+U("waffle-dbsource-configbar-watch-tutorial-button-wrapper")+'"></div><div class="'+U("waffle-dbsource-configbar-send-feedback-button-wrapper")+'"></div><div class="'+U("waffle-dbsource-configbar-overflow-menu-button-wrapper")+'"></div></div></div><div class="'+U("waffle-dbsource-configbar-actions")+'"><div class="'+U("waffle-dbsource-configbar-columns-menu-button-wrapper")+'"></div><div class="'+U("waffle-dbsource-configbar-button-wrapper")+
" "+U("waffle-dbsource-configbar-chart-button-wrapper")+'"></div><div class="'+U("waffle-dbsource-configbar-button-wrapper")+" "+U("waffle-dbsource-configbar-pivot-button-wrapper")+'"></div><div class="'+U("waffle-dbsource-configbar-button-wrapper")+" "+U("waffle-dbsource-configbar-function-button-wrapper")+'"></div><div class="'+U("waffle-dbsource-configbar-separator")+'"></div><div class="'+U("waffle-dbsource-configbar-button-wrapper")+" "+U("waffle-dbsource-configbar-table-button-wrapper")+'"></div><div class="'+
U("waffle-dbsource-configbar-answers-wrapper")+'"></div></div></div></div>';return T(a)}
function fug(){var a=T('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="#188038" fill-rule="nonzero"><path d="M14.5263158 2C15.3368421 2 16 2.7 16 3.55555556V14.4444444C16 15.3 15.3368421 16 14.5263158 16H3.47368421C2.66315789 16 2 15.3 2 14.4444444V3.55555556C2 2.7 2.66315789 2 3.47368421 2H14.5263158zM3.5 3.5v11h11v-11h-11z"/><path d="M6.75 12.75h-1.5V7.5h1.5zM9.75 12.75h-1.5v-7.5h1.5zM12.75 12.75h-1.5v-3h1.5z"/></g></svg>');a=S(a)+"<span>";return T(a+
"\u30b0\u30e9\u30d5</span>")}
function gug(){var a=T('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#188038" fill-rule="evenodd" d="M10 13h1.185c.9975 0 1.815-.81 1.815-1.815V10h-2.25l3-3 3 3H14.5v1.185c0 1.83-1.485 3.315-3.315 3.315H10v2.25l-3-3 3-3V13zM8 6V2h6.5454545C15.3454545 2 16 2.72 16 3.6V6H8zM2 6V3.6C2 2.72 2.72 2 3.6 2H6v4H2zm1.6 10c-.88 0-1.6-.6545455-1.6-1.4545455V8h4v8H3.6z"/></svg>');a=S(a)+"<span>";return T(a+"\u30d4\u30dc\u30c3\u30c8 \u30c6\u30fc\u30d6\u30eb</span>")}
function hug(){var a=S(A3e())+"<span>";return T(a+"\u89e3\u51cd</span>")}function iug(){var a=T('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#188038" d="M15 2H3v1.75L8.143 9 3 14.25V16h12v-2.625H7.286L11.571 9 7.286 4.625H15z"/></svg>');a=S(a)+"<span>";return T(a+"\u95a2\u6570</span>")}
function jug(){var a=T;var b=T('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>');return a(S(b))}
function kug(){var a='<span class="'+U("waffle-dbsource-configbar-secondary-button-content")+'">';var b=T('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="#80868b" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2-3.5l6-4.5-6-4.5z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>');a=a+S(b)+"<span>";return T(a+"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u898b\u308b</span></span>")}
function lug(){var a='<span class="'+U("waffle-dbsource-configbar-secondary-button-content")+'">';var b=T('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="#80868b" d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17l-.59.59-.58.58V4h16v12zm-9-4h2v2h-2zm0-6h2v4h-2z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>');a=a+S(b)+"<span>";return T(a+"\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u3092\u9001\u4fe1</span></span>")}
;function mug(a,b,c,d,e,f,h){R.call(this,h);this.R=a;this.V=b;this.O=c;this.Ua=d;this.L=b.Ca;this.Ra=f;this.D=new iQ("\u5217",new $tg(this.qa()),void 0,this.qa());this.D.Ic("waffle-dbsource-configbar-columns-menu-button");this.D.Sh(!0);this.Ga(this.D);this.Aa=nug(this,"waffle-dbsource-configbar-chart-button",nx(fug));this.Ca=nug(this,"waffle-dbsource-configbar-pivot-button",nx(gug));this.ma=nug(this,"waffle-dbsource-configbar-table-button",nx(hug));a=nx(iug);this.H=new By(a,new bug(this.qa()),xud.getInstance(),
this.qa());this.H.Ic("waffle-dbsource-configbar-function-button");this.H.Sh(!0);this.H.jn(!0);this.Ga(this.H);this.La=nug(this,"waffle-dbsource-configbar-secondary-button",nx(kug));this.Oa=nug(this,"waffle-dbsource-configbar-secondary-button",nx(lug));this.Xa=new py("\u63a5\u7d9a\u8a2d\u5b9a","settings");this.Fa=new py(VB.getLabel(),"add-calculated-column");this.Ia=new py(UB.getLabel(),"show-refresh-all");this.J=new iQ(nx(jug),new cug(this.qa()),void 0,this.qa());this.J.Ic("waffle-dbsource-configbar-overflow-menu-button");
this.J.jn(!0);this.Ga(this.J);this.Pa=new Map([[this.D,""],[this.Aa,"\u30b0\u30e9\u30d5"],[this.Ca,"\u30d4\u30dc\u30c3\u30c8 \u30c6\u30fc\u30d6\u30eb"],[this.ma,"\u30c6\u30fc\u30d6\u30eb"],[this.H,"\u95a2\u6570"]]);this.C=null;B(z(),"feda")&&(this.C=new Vtg(this.V,this.O,this.Ua,e,75,this.qa()),this.Ga(this.C));this.F=null}u(mug,R);p=mug.prototype;p.Ba=function(){this.ib(nx(eug))};
p.Ha=function(){R.prototype.Ha.call(this);var a=k0e();a&&this.J.Ic(a);this.D.render(this.Ea("waffle-dbsource-configbar-columns-menu-button-wrapper"));this.Aa.render(this.Ea("waffle-dbsource-configbar-chart-button-wrapper"));this.Ca.render(this.Ea("waffle-dbsource-configbar-pivot-button-wrapper"));this.ma.render(this.Ea("waffle-dbsource-configbar-table-button-wrapper"));this.H.render(this.Ea("waffle-dbsource-configbar-function-button-wrapper"));this.J.render(this.Ea("waffle-dbsource-configbar-overflow-menu-button-wrapper"));
this.La.render(this.Ea("waffle-dbsource-configbar-watch-tutorial-button-wrapper"));this.Oa.render(this.Ea("waffle-dbsource-configbar-send-feedback-button-wrapper"));this.C&&this.C.Wa(this.Ea("waffle-dbsource-configbar-answers-wrapper"));this.F=this.Ea("waffle-dbsource-configbar-header-title");this.getHandler().listen(this.Aa,"action",this.gfb).listen(this.Ca,"action",this.msb).listen(this.ma,"action",this.Txb).listen(this.H,"show",this.Nhb).listen(this.D,"show",this.ogb).listen(this.R,"ia",this.IKb).listen(this.F,
["focus","mousedown"],this.Wpb).listen(this.J,"show",this.orb).listen(this.J.Mb(),"action",this.qrb).listen(this.Oa,"action",this.pvb).listen(this.La,"action",function(){return sob.Ab()});this.C?this.getHandler().listen(this.C.getElement(),"keydown",this.cNa):this.getHandler().listen(this.ma.getElement(),"keydown",this.cNa);oug(this.Ca,"fedp");oug(this.ma,"fedr");oug(this.H,"fedf");oug(this.Aa,"fedbc");oug(this.D,"fedsccm");Hy(this.J.Ka(),"\u305d\u306e\u4ed6\u306e\u30aa\u30d7\u30b7\u30e7\u30f3",void 0);
this.refresh()};p.cNa=function(a){9===a.keyCode&&(a.preventDefault(),this.dispatchEvent(new pug))};p.setVisible=function(a){Q(this.Ka(),a);if(this.C){a="";var b=SR(this.R);b&&b.jg()&&(a=b.jg());Wtg(this.C,a)}};p.isVisible=function(){return Av(this.Ka())};
p.refresh=function(){qug(this,SR(this.R).Rd());var a=this.Ea("waffle-dbsource-configbar-header-subtitle"),b=rug(this);b?(b+=" \u884c",this.qa().Ce(a,b)):this.qa().Ce(a,"");(a=gM(this.V.H)||this.V.Fd())||(a=this.L,b=sug(this),a.C.has(b)?(a=a.C.get(b),a=Lf(a,1)&&!a.hk()):a=!1);tug(this,!a);this.D.Ad(!1);uug(this);this.C&&Wtg(this.C,sug(this))};function nug(a,b,c){c=new cV(c,a.qa());c.Ic(b);a.Ga(c);return c}p.gfb=function(){G7b(this.L);zK(null,void 0,sug(this));this.O.C(36528,vug())};
p.msb=function(){G7b(this.L);var a=new dh,b=sug(this);F(a,1,b);b=PJe();F(b,15,a);B(z(),"fedpos")&&F(b,17,!1);a=QJe(b);a=new INe(null,OSb(a),void 0);YWb(a);this.O.C(36527,vug())};p.Txb=function(){G7b(this.L);eXb(sug(this));this.O.C(36529,vug())};p.Nhb=function(){var a=this.H.Mb();if(a&&0==a.Jc()){a=this.H.Mb();var b=rLd(new qLd(this.V.Xa,a,this.Ra),void 0,!0);b=ja(b);for(var c=b.next();!c.done;c=b.next())a.Is(c.value)}G7b(this.L)};
p.Wpb=function(a){var b=B(z(),"fedcr");this.F.isContentEditable||$N(this.V)||!b||(this.F.contentEditable=!0,"focus"===a.type&&(a=window.getSelection(),b=document.createRange(),b.selectNodeContents(this.F),a.removeAllRanges(),a.addRange(b)),this.getHandler().listen(this.F,"keydown",this.HKb).listen(this.F,"blur",this.ewb))};p.HKb=function(a){switch(a.keyCode){case 13:this.dispatchEvent(new wug(SR(this.R).jb(),Yn(this.F)));xug(this,!1);break;case 27:xug(this,!0)}};
p.ewb=function(){window.getSelection().removeAllRanges();xug(this,!0)};function xug(a,b){a.F.contentEditable=!1;mn(a.F,"keydown");mn(a.F,"blur");b&&qug(a,SR(a.R).Rd())}p.orb=function(){for(var a=this.J.Mb();0<a.Jc();)a.Tl(0,!0);a.Is(this.Xa);B(z(),"fedcc")&&!this.V.Fd()&&a.Is(this.Fa);B(z(),"fedors")&&UB.isVisible()&&a.Is(this.Ia)};
p.qrb=function(a){switch(a.target.Qa()){case "settings":pob.Ab(sug(this));break;case "add-calculated-column":this.O.C(36651,vug());VB.Ab();break;case "show-refresh-all":this.O.C(36705,vug()),UB.Ab()}};p.pvb=function(){(xu(),pt).Ab({source:"big-sheets-feedback"})};p.ogb=function(){var a=this,b=this.D.Mb();aug(b,!0);var c=sug(this);iM(this.L,c).then(function(d){uug(a);0<d.length?b.D(d,c):(a.D.Ad(!1),a.refresh())})};p.IKb=function(a){qug(this,a.zl)};
function qug(a,b){var c=a.Ea("waffle-dbsource-configbar-header-title");a.qa().Ce(c,b)}function oug(a,b){B(z(),b)||(a.Na(!1),a.setVisible(!1))}
function tug(a,b){var c=rug(a);a.Pa.forEach(function(d,e){e.Na(b);d=b&&c&&d?c+(" \u884c\u306b\u57fa\u3065\u3044\u3066 "+(d+" \u3092\u633f\u5165\u3059\u308b")):b&&d?d+" \u3092\u633f\u5165":b?"":"\u3053\u306e\u63a5\u7d9a\u30c7\u30fc\u30bf\u3092\u4f7f\u7528\u3057\u305f\u5206\u6790\u3092\u66f4\u65b0\u3001\u7de8\u96c6\u3059\u308b\u6a29\u9650\u3084\u30a2\u30af\u30bb\u30b9\u304c\u3042\u308a\u3042\u307e\u305b\u3093\u3002";Hy(e.Ka(),d,void 0);d&&NFd(e.Ka(),"waffle-dbsource-configbar-db-object-creation-button-tooltip")});
a.C&&a.C.Na(b);a.Fa&&a.Fa.Na(b);a.Ia&&a.Ia.Na(b)}function sug(a){return SR(a.R).jg()}function uug(a){a=a.D.Mb();for(aug(a,!1);1<a.Jc();)a.Tl(1,!0)}function rug(a){return(a=ritz_api.BigSheetsApi.getDatasourceTotalRowCount(sug(a)))?mqc.format(parseInt(a,10)):null}function vug(){var a=mj(new kj,!0);return hy(gy(cy(new Sx,75),a))}function wug(a,b){Zm.call(this,"datasheet-rename");this.Wg=a;this.name=b}u(wug,Zm);function pug(){Zm.call(this,"configbar-dom-focus-out")}u(pug,Zm);function yug(a,b,c,d,e,f,h,k,l){nn.call(this);this.D=a;this.F=b;this.R=l;this.L=c;this.ma=d;this.O=e;this.H=f;this.J=h;this.V=k;this.Ma=new on(this);this.va(this.Ma);this.C=null;this.Ma.listen(this.D,["ba","ta"],this.xIa).listen(this.D,["ca","sa"],this.Ovb).listen(this.F,["acl_change","offline_status","readonly_status"],this.xcb);this.xIa()}u(yug,nn);p=yug.prototype;
p.xIa=function(){var a=SR(this.D);a&&XG(a)&&(this.C?this.C.refresh():(this.C=new mug(this.D,this.F,this.L,this.ma,this.V,this.R),a=this.C.qa(),this.C.render(a.getElement("waffle-dbsource-configbar-id")),this.C.Pd(this),this.Ma.listen(this.C,"insert-formula-function",this.Ewb).listen(this.C,"datasheet-rename",this.Chb).listen(this.C,"configbar-dom-focus-out",this.Hgb)),this.C.setVisible(!0),YHd())};p.Chb=function(a){var b=this;a=new XEc(a.Wg,a.name);BK(a,function(c){c||xug(b.C,!0)});this.J.C(a)};
p.Hgb=function(){aR(GK(this.H))};p.Ewb=function(a){var b=this,c=SR(this.D),d=c.jg();if(d){var e=c.Rd(),f=a.ma;IDe(this.O,function(h,k){var l=ritz_api.BigSheetsApi.getDatasourceReferenceString(e,null);QBa([iM(b.F.Ca,d),wo(1E3)]).then(function(){return zug(b,f,l,k)})},"\u6570\u5f0f\u306e\u633f\u5165");this.L.C(36535,vug())}};
function zug(a,b,c,d){if(d)a.F.C.zz(d.Bi,function(){var f=fJ(a.F.C),h=new zl(d.C,d.sj);SJ(f,h);Aug(a,b,c,h)});else{var e=new HCd(3,YI(a.F.C)+1);BK(e,function(f){f&&Aug(a,b,c,new zl)});a.J.C(e)}}function Aug(a,b,c,d){Jo(VI(IK(a.H).C,Ul(d)),function(){IEd(GK(a.H),b,c)})}p.Ovb=function(){this.C&&this.C.setVisible(!1)};p.xcb=function(){var a=SR(this.D);a&&XG(a)&&this.C&&this.C.refresh()};p.Ja=function(){nn.prototype.Ja.call(this);pf(this.C)};function Bug(){var a='<div class="'+U("waffle-create-datasheet-welcome-dialog-section")+'"><img src="//ssl.gstatic.com/docs/spreadsheets/bigSheets_welcome.png" class="'+U("waffle-create-datasheet-welcome-dialog-image")+'" alt=""><h3 class="'+U("waffle-create-datasheet-welcome-dialog-welcome-message")+'"><span>';a=a+'Google \u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3067\u30d3\u30c3\u30b0\u30c7\u30fc\u30bf\u306b\u63a5\u7d9a\u3057\u3066\u5206\u6790\u3057\u307e\u3059</span></h3><div class="'+
(U("waffle-create-datasheet-welcome-dialog-welcome-description")+'">');a=a+'Google \u306e\u30af\u30e9\u30a6\u30c9 \u30c7\u30fc\u30bf \u30a6\u30a7\u30a2\u30cf\u30a6\u30b9\u3067\u3042\u308b BigQuery \u306b\u63a5\u7d9a\u3059\u308b\u3068\u3001Google \u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3067\u6570\u5341\u5104\u884c\u306e\u30c7\u30fc\u30bf\u3092\u5206\u6790\u3057\u3001\u540c\u50da\u3068\u5171\u6709\u3067\u304d\u307e\u3059</div><div class="'+(U("waffle-create-datasheet-welcome-dialog-button-wrapper")+
'"></div></div>');return T(a)};function Cug(a){b0.call(this,"waffle-create-datasheet-welcome-dialog",a);this.F=new cV("\u57fa\u790e\u5b66\u7fd2",this.qa());this.Ga(this.F);this.D=new UA("\u63a5\u7d9a",this.qa());this.Ga(this.D)}u(Cug,b0);p=Cug.prototype;
p.Ba=function(){b0.prototype.Ba.call(this);lx(this.Ib(),Bug);this.F.render(this.Ea("waffle-create-datasheet-welcome-dialog-button-wrapper"));this.getHandler().listen(this.F,"action",this.znb);this.D.render(this.Ea("waffle-create-datasheet-welcome-dialog-button-wrapper"));this.getHandler().listen(this.D,"action",this.dNa);sw(this.Ea("waffle-dataconnector-modal-title"));var a=this.Ea("waffle-create-datasheet-welcome-dialog-welcome-message");a.id=Kv(this,"waffle-create-datasheet-welcome-dialog-welcome-message");
rw(a,"heading");tw(this.Ka(),"labelledby",a.id);a=this.Ea("waffle-create-datasheet-welcome-dialog-welcome-description");a.id=Kv(this,"waffle-create-datasheet-welcome-dialog-welcome-description");tw(this.Ka(),"describedby",a.id)};p.znb=function(){Ov("https://connectedsheets.page.link/support")};p.dNa=function(){this.resolve(!0)};p.ana=function(a){13==a.keyCode&&this.dNa()};p.K_=function(){PB.Ab();this.reject()};p.eF=function(){PB.Ab();this.reject()};function Dug(a){a=a.Hab;a='<div class="'+U("waffle-create-datasource-sheet-loading-dialog-section")+'"><img class="'+U("waffle-create-datasource-sheet-loading-dialog-image")+'" src="'+U(jw(a))+'" alt=""><div class="'+U("waffle-create-datasource-sheet-loading-dialog-tip")+'">';return T(a+"\u30c7\u30fc\u30bf\u3092\u63a5\u7d9a\u3057\u3066\u3044\u307e\u3059\u2026</div></div>")};function Eug(a,b){S_.call(this,"waffle-create-datasource-sheet-loading-dialog",b);this.D=a}u(Eug,S_);Eug.prototype.Ba=function(){S_.prototype.Ba.call(this);lx(this.Ib(),Dug,{Hab:this.D});sw(this.Ea("waffle-dataconnector-modal-title"));var a=this.Ea("waffle-create-datasource-sheet-loading-dialog-tip");a.id=Kv(this,"waffle-create-datasource-sheet-loading-dialog-tip");rw(a,"heading");tw(this.Ka(),"labelledby",a.id)};function Fug(){var a='<div class="'+U("waffle-create-datasource-sheet-success-dialog-section")+'"><img src="//ssl.gstatic.com/docs/spreadsheets/bigSheets_success_2.gif" class="'+U("waffle-create-datasource-sheet-success-dialog-image")+'" alt=""><h5 class="'+U("waffle-create-datasource-sheet-success-dialog-success-message")+'">';a=a+'\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002BigQuery \u30c7\u30fc\u30bf\u304c\u63a5\u7d9a\u3055\u308c\u3001\u5206\u6790\u306e\u6e96\u5099\u304c\u3067\u304d\u307e\u3057\u305f</h5><div class="'+
(U("waffle-create-datasource-sheet-success-dialog-metadata-wrapper")+" "+U("waffle-create-datasource-sheet-success-dialog-datasource-info")+'"></div><div class="'+U("waffle-create-datasource-sheet-success-dialog-success-description")+'">');a=a+'\u6163\u308c\u89aa\u3057\u3093\u3060\u65b9\u6cd5\u3067\u3001\u30d4\u30dc\u30c3\u30c8 \u30c6\u30fc\u30d6\u30eb\u3001\u6570\u5f0f\u3001\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046</div><div class="'+(U("waffle-create-datasource-sheet-success-dialog-start-analyze-button-wrapper")+
'"></div><div class="'+U("waffle-create-datasource-sheet-success-dialog-watch-tutorial")+" "+U("goog-link-button")+'"><span>');return T(a+"\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u52d5\u753b\u3092\u898b\u308b</span></div></div>")};function Gug(a,b,c){S_.call(this,"waffle-create-datasource-sheet-success-dialog",c);this.J=a;this.H=b;this.F=new UA("\u5206\u6790\u3092\u958b\u59cb",this.qa());this.Ga(this.F);this.D=new ly(void 0,gO.getInstance(),this.qa());this.Ga(this.D)}u(Gug,S_);
Gug.prototype.Ba=function(){var a=this;S_.prototype.Ba.call(this);lx(this.Ib(),Fug);var b=this.Ea("waffle-create-datasource-sheet-success-dialog-metadata-wrapper");this.qa().Ce(b,Hug(this.J,this.H));this.F.render(this.Ea("waffle-create-datasource-sheet-success-dialog-start-analyze-button-wrapper"));this.D.Wa(this.Ea("waffle-create-datasource-sheet-success-dialog-watch-tutorial"));sw(this.Ea("waffle-dataconnector-modal-title"));b=this.Ea("waffle-create-datasource-sheet-success-dialog-success-message");
b.id=Kv(this,"waffle-create-datasource-sheet-success-dialog-success-message");rw(b,"heading");tw(this.Ka(),"labelledby",b.id);b=this.Ea("waffle-create-datasource-sheet-success-dialog-success-description");b.id=Kv(this,"waffle-create-datasource-sheet-success-dialog-success-description");tw(this.Ka(),"describedby",b.id);this.getHandler().listen(this.F,"action",function(){return a.eF()}).listen(this.D,"action",function(){return sob.Ab()})};
function Hug(a,b){a=(new $z("{NUM_COLUMNS,plural, =0{\u5217\u306a\u3057}=1{1 \u5217}other{# \u5217}}")).format({NUM_COLUMNS:a});return b?b+" \u884c \u2022 "+a:a};function Iug(a,b,c,d,e,f,h,k,l,n,q,r){J3e.call(this,new g1e(n.getType(),l,"filter_db_sheet",r),a,b,c,d,e,f,h,k,l,q,r);this.Lb=hM(n);this.Gc=new ik}u(Iug,J3e);p=Iug.prototype;p.Ba=function(){J3e.prototype.Ba.call(this);var a=KP(this.D,this.Tg());mtg(this.H.C,500<a.left?0:3)};
p.CIa=function(){var a=this.Qa().$b(),b=ritz_api.BigSheetsApi.getDatasourceSheetCriteria(a,this.Gc.serialize(this.Lb)),c=null,d=null;0<b.length&&(c=this.Gc.Pc(Dg.xa(),b[0]),d=vTe(a));xTe(this.H,c,d);a=this.J;b=this.R;c=this.Qa().$b();c=ritz_api.BigSheetsApi.getDatasourceSheetSortOrder(c,this.Gc.serialize(this.Lb));Ew(a.Ka(),"waffle-datasourcesheet-sort-selected",0==c);Ew(b.Ka(),"waffle-datasourcesheet-sort-selected",1==c);a=this.C;b=a.Mb().Ka();Aw(b,"waffle-datasourcesheet-filterbox-container");TX(a);
wv(b,"");a.wl()};p.jGa=function(a){if("filtering_cancelled"==a.type)this.Ra();else if(a=this.Tg(),a=qTe(this.H,this.Qa().$b(),a.y,a.x,!1,!1),!$Se(this.H.C)){if(null==a)var b=new AZ("filterClear");else b=new AZ("filterUpdate"),b.D=a;b.O=this.Lb;this.dispatchEvent(b);this.Ra()}};p.sna=function(a){var b=new AZ("filterSort");b.O=this.Lb;b.F=a?1:0;this.dispatchEvent(b)};p.sKa=m(!1);
p.Nga=function(a){var b=this.D,c=LP(b,"r",a.y),d=b.C,e=2*d.C,f=this.Qa().yg(a.y,a.x).getFormat();c=-c-e;a="rtl"==(f.D||null)||"auto-rtl"==(f.D||null)?e:LP(b,"c",a.x)-16*d.C-e;d=d.C;this.Ux(new zl(a/d,c/d))};function Jug(a,b,c,d,e,f){d=void 0===d?null:d;e=void 0===e?!1:e;f=void 0===f?!1:f;AK.call(this,147);this.R=a.$b();this.O=b;this.C=c||[];this.F=d;this.J=e;this.L=f}u(Jug,AK);Jug.prototype.yd=function(){var a=new yJb;F(a,1,this.R);F(a,7,this.O);if(this.J)F(a,5,!0);else for(var b=0;b<this.C.length;b++)Nf(a,3,this.C[b]);this.L?F(a,6,!0):null!=this.F&&F(a,4,this.F);return a};
Jug.prototype.equals=function(a){return this.R==a.R&&this.O.equals(a.O)&&this.J==a.J&&this.L==a.L&&this.F==a.F&&ed(this.C,a.C,function(b,c){return b.equals(c)})};function Kug(a,b,c,d,e,f,h){C.call(this);this.Aa=a;this.O=h;this.ma=b;this.D=c;this.V=d;this.R=e;this.L=f;this.Ma=new on(this);this.va(this.Ma);this.C=null;this.F=new ik;this.H=new bz(this);this.va(this.H);this.Ma.listen(this.D,"filter-triggered",this.J);this.H.subscribe(rC,"action",this.J)}u(Kug,C);
Kug.prototype.J=function(){var a=SR(this.ma);if(a&&XG(a)){var b=GK(this.D),c=Lug(this),d=PJ(c),e=NJ(Lug(this));d=new zl(d.x,e.y);e=TDd(c,d.x);this.C&&(this.C.dispose(),this.C=null);this.C=new Iug(c,this.R,b.R,b.D,b.F,new sO(d),!1,!1,this.V,e,this.O);this.va(this.C);iP(xDc(b),this.C);this.Ma.listen(this.C,"filterClear",this.Ca).listen(this.C,"filterSort",this.Ia).listen(this.C,"filterUpdate",this.Fa);this.C.Nga(d);this.C.Lc();this.C.C.Ad(!0);b=hM(e);a=ritz_api.BigSheetsApi.getDatasourceSheetSortOrder(a.jb(),
this.F.serialize(b));b=yn("waffle-autofilter-sort waffle-datasourcesheet-sort-selected");null!=a&&b&&(ww(b,b.innerText+"\u3092\u9078\u629e\u4e2d"),Ew(b,"hc-enabled-focus","black"==Jy()))}};Kug.prototype.Ca=function(a){a=new Jug(Lug(this),a.O,null,null,!0);Mug(this,a)};Kug.prototype.Fa=function(a){var b=new Dg;F(b,4,a.D);a=new Jug(Lug(this),a.O,[b],null);Mug(this,a)};
Kug.prototype.Ia=function(a){var b=Lug(this).$b(),c=a.O;b=ritz_api.BigSheetsApi.getDatasourceSheetSortOrder(b,this.F.serialize(c));var d=!1;switch(a.F){case 1:d=0==b;break;case 0:d=1==b}a=d?new Jug(Lug(this),c,null,null,void 0,!0):new Jug(Lug(this),c,null,1==a.F?0:1);Mug(this,a)};function Mug(a,b){a.L.C(b);DDe(xDc(GK(a.D)));pf(a.C);a.C=null}function Lug(a){return fJ(a.Aa.C)};function Nug(a,b,c,d,e,f,h){C.call(this);var k=this;this.Ma=new on(this);this.va(this.Ma);this.Aa=a;this.J=a.O;this.F=b;this.C=c;this.V=e;this.R=f;this.O=new bz(this);this.va(this.O);this.ma=h;this.H=this.D=null;Oug(this);Pug(this,d);this.L=new Om;this.va(this.L);Pm(this.L,this.J.D,function(l){var n=Qug(k);n&&NCe(l,n)&&Rug(k,n)})}u(Nug,C);function Oug(a){var b=new Wu(["waffle-dbsheet-or-dbobject-pill-active"]);a.R.D(kob,b)}
function Pug(a,b){var c=iH(a.Aa.C);a.Ma.listen(b,"J",a.Cxb).listen(c,"Bb",a.KKb).listen(c,["kb","xb"],a.Yaa).listen(a.F,"ba",a.Yaa).listen(a.C,"activeCellChange valueChange blurEmbeddedObject embeddedObjectMouseEnter embeddedObjectMouseLeave focusEmbeddedObject".split(" "),a.Yaa).listen(a.C,"inputBoxActivate",a.w$).listen(a.C,"mouseover",a.JKb).listen(a.C,"refresh-db-object-request",a.UHa).listen(a.F,"ca",a.Xia);a.O.subscribe(kob,"action",a.$kb)}p=Nug.prototype;p.Ja=function(){this.Xia();C.prototype.Ja.call(this)};
p.KKb=function(){var a=GK(this.C);a&&HK(this.C)&&SCc(a)};p.Xia=function(){qf(Sug(this),Tug(this),this.D);this.H=this.D=null};p.Cxb=function(){this.D&&htg(this.D)};p.Yaa=function(){var a=GK(this.C),b=SR(this.F);if(a&&b){b=!!a.Xa;var c=!!tDc(a);b||!c||a.Xa||(a.Xa=new itg(a.Qa(),a.R,a.D,a.F,new sO(oDc(a),new zl(0,0)),a.Fa,a.Lb,a.eb),fR(a.V,"default",a.Xa,!0),a.va(a.Xa),a.Xa.setVisible(!0));b=a.Qa();a=tDc(a)||PJ(b);(a=yJ(lJ(b,a),a,b.$b()))&&(a.C||a.D)?this.w$():(a=Qug(this),a!=this.H&&Rug(this,a))}else this.Xia()};
function Rug(a,b){if(b){a.w$();var c=Uug(a);if(c){var d=AV(a.J,b),e=Vpc(b);rqc(c,d,e);Vug(a,b,c,d);a.H=b}}else a.w$()}p.w$=function(){var a=Sug(this);a&&a.setVisible(!1);(a=Tug(this))&&a.setVisible(!1);this.H=null};p.$kb=function(){var a=Uug(this);a&&(a.Ka().focus(),this.V.Rb(2))};p.UHa=function(){var a=Qug(this);if(a)switch(ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(a)){case 1:ynb.Ab(a);break;case 5:Bnb.Ab(a);break;case 3:Enb.Ab(a);break;case 2:znb.Ab(a);break;case 4:nob.Ab(a)}};
p.JKb=function(a){var b=SR(this.F),c=GK(this.C);c&&b&&3!=b.getSheetType()&&(a=a.xj)&&kO(a)&&(this.Yaa(),SCc(c))};
function Uug(a){var b=Qug(a);if(!b)return null;var c=ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(b);if(4==c)if(3!=SR(a.F).getSheetType())a=null;else{if(!a.D){c=GK(a.C);b=c.we();a.D=new nqc(a.ma);a.Ma.listen(a.D,"refresh-db-object-request",a.UHa);c=new qw(c.Ia.J,b?5:1);a.D.render();var d=a.D;d.O=c;d.L=b;htg(a.D)}a=a.D}else if(2==c)if(a=GK(a.C))a:if(c=a.J.C,ktg(a)==b)b=jtg(a.J).Od().getId(),a=DDc(a,b);else{for(d=c.length-1;0<=d;d--){var e=c[d];if(e&&ritz_api.BigSheetsApi.getExternalDataIdForObject(e)==
b){a=DDc(a,e);break a}}a=null}else a=null;else a=Tug(a);return a}function Sug(a){return(a=GK(a.C))?CDc(a):null}function Tug(a){a=GK(a.C);return a?(a=a.Xa)?a.F:null:null}function Qug(a){return(a=GK(a.C))?ltg(a):null}function Vug(a,b,c,d){gC.isEnabled()&&Wug(d.getType())&&pDd(a.J,b,function(e){c.Vu(e)})}function Wug(a){return"no-results"==a||"fetch-successful"==a};function Xug(a,b){AK.call(this,154);this.F=a;this.C=b}u(Xug,AK);Xug.prototype.yd=function(){var a=new KJb;F(a,1,this.F);for(var b=0;b<this.C.length;b++)Nf(a,2,this.C[b]);return a};function Yug(a,b){this.D=a;this.C=b};function Zug(a){this.D=a;this.C={};this.F=new ik}
function $ug(a,b){b&&b.forEach(function(c){if(a.C[c]){var d=(new Date).getTime()-a.C[c].D,e=L7b(c),f=e?e.getState():null;if(e&&f&&(2==f||3==f)){if(e=avg[f]){d=gj(new fj,1E3*d);var h=a.C[c].C;f=new xme;f=M(f,2,h);var k=ritz_api.RitzModelApi.getExternalData(c);if(k){k=a.F.Pc(Fh.xa(),k);a:switch(h){case 3:var l=E(k,6).getFormat();l=Mf(l,1)+Mf(l,2)+Mf(l,3);break a;case 6:l=E(k,8)?1:0;break a;default:l=Mf(E(k,7),1)}M(f,5,l);a:switch(h){case 3:h=E(k,6);h=Mf(h,3);break a;case 6:h=E(k,8)?1:0;break a;default:h=
Mf(E(k,7),2)}M(f,4,h)}h=new kj;f=Mi(h,16,f);f=mj(f,!0);d=gy(ey(cy(new Sx,41),d),f);a.D.C(e,hy(d))}delete a.C[c]}}})}var bvg={},avg=(bvg[2]=36294,bvg[3]=36567,bvg);function cvg(a,b){AK.call(this,139);this.C=a||"";this.F=b}u(cvg,AK);cvg.prototype.yd=function(){var a=new gJb;F(a,1,this.C);F(a,2,this.F);return a};cvg.prototype.wH=function(){return iJb.xa()};function dvg(a,b,c,d,e,f,h,k,l,n,q,r,w){S2e.call(this,a,b,d,f,h,k,l);var x=this;this.Pa=new yug(b,this.F,l,q,f,c,n,d,w);this.va(this.Pa);this.fb=f;this.Ma=new on(this);this.va(this.Ma);this.Xa=new Nug(a,b,c,d,e,k,l);this.va(this.Xa);this.ma=n;this.La=a.D.D;this.Ia=new ik;this.Oa=new Zug(l);this.bb=r;this.Ua=new Kug(a,b,c,l,e,n,w);this.va(this.Ua);this.L=new Set;this.O=new Set;(b=oB.getInstance().C.newDatasourceIdFromOnboarding)?(this.L.add(b),evg(this)):oB.getInstance().C.showBigSheetsOnboardingDialogOnStart&&
lob.isEnabled()&&this.oTa();this.Ma.listen(this.F,"db-execution-status-updated",this.GWb).listen(this.D,"ba",this.uUa);this.Fa=new Om;this.va(this.Fa);Pm(this.Fa,a.O.D,function(A){x.uUa();fvg(x,A)})}u(dvg,S2e);p=dvg.prototype;
p.Cya=function(a){a.D(job,aV).F(job,aV).D(mob,aV).D(pob,bud).F(pob,bud).D(fC,aV).F(fC,aV).D(nob,aV).D(Lnb,aV).D(qob,aV).D(rob,aV).D(gC,aV).D(oob,aV).D(VB,aV).D(hob,aV).D(gob,aV).D(sob,bud).F(sob,bud).D(iob,aud);B(z(),"fedp")&&a.D(ynb,aV);B(z(),"fedr")&&a.D(Bnb,aV);B(z(),"fedbc")&&a.D(znb,aV);B(z(),"feci")&&a.D(Anb,aV);B(z(),"fedf")&&a.D(Enb,aV);B(z(),"fedors")&&a.D(Mnb,aV)};
p.$Ta=function(){var a=this;this.V.subscribe(mob,"action",this.Ca).subscribe(job,"action",this.$gb).subscribe(fC,"action",this.$yb).subscribe(pob,"action",this.JZb).subscribe(nob,"action",function(b){return gvg(a,1,b)}).subscribe(znb,"action",function(b){return gvg(a,2,b)}).subscribe(Anb,"action",function(b){return gvg(a,6,b)}).subscribe(Bnb,"action",function(b){return gvg(a,5,b)}).subscribe(ynb,"action",function(b){return gvg(a,3,b)}).subscribe(Enb,"action",function(b){return gvg(a,4,b)}).subscribe(Lnb,
"action",this.Awb).subscribe(qob,"action",this.oua).subscribe(rob,"action",this.pTa).subscribe(Mnb,"action",function(b){0!==b.length&&(hvg(a,ritz_api.BigSheetsApi.createRefreshObjectRequest(b),null,b),ivg(a,b))}).subscribe(sob,"action",this.Lzb).subscribe(VB,"action",function(){return jvg(a,null,!0)}).subscribe(hob,"action",this.e8a).subscribe(gob,"action",this.e3a).subscribe(iob,"action",this.P1b)};p.GWb=function(a){$ug(this.Oa,a.D)};p.$yb=function(a){kvg(this,a.jg(),a.C)};
p.JZb=function(a){var b=this,c=ritz_api.BigSheetsApi.getDatasourceSlotDeltaProto(a),d=this.Ia.Pc(Fg.xa(),c),e=new Z_(dM.getInstance());Jo(this.J,function(f){if(!fC.isEnabled()&&Lf(d,3)&&Lf(E(d,3),4)){var h=f.C9a(a,d);b.va(h);R_(b.C,h)}else{var k=V2e("BigQuery \u306b\u63a5\u7d9a\u3057\u3066\u3044\u307e\u3059\u2026");s2e(e).then(function(l){wz(uz.getInstance(),k);l=f.qCa(a,d,l);b.va(l);R_(b.C,l)},function(){wz(uz.getInstance(),k);if(Lf(d,3)&&Lf(E(d,3),1)){var l=f.rCa(a,d,[],!0);b.va(l);R_(b.C,l)}else b.R9()})}})};
p.pTa=function(a){var b=this;Jo(this.J,function(c){var d=a.H;if(d){var e=d.C;if(Lf(E(e,3),4)){var f=E(d.C,3);e=E(f,5);var h=new Fg;F(h,2,2);var k=new Gg;f=E(f,4);var l=f.dh()||"";f=l+(l?".":"")+E(f,2)+"."+f.getName();F(k,1,"select * from `"+f+"`");F(k,5,e);F(h,3,k);e=h}c=c.qCa(d.jg(),e,a.C)}else c=c.u9a(a);b.va(c);R_(b.C,c)})};p.$gb=function(a){kvg(this,null,a.C)};
function kvg(a,b,c){var d=null==b;b=new cvg(b,c);BK(b,function(e,f){e&&(e=f.jg(),lvg(a,e),d&&(a.L.add(e),evg(a)))});a.ma.C(b);d||m1e(a.C)}function lvg(a,b){var c=ritz_api.BigSheetsApi.generateExternalDataIdForDatasourceSheet(b);b=ritz_api.BigSheetsApi.createRefreshObjectRequestForDatasourceSheetInitialLoad(c,b);hvg(a,b,1,[c])}
p.oTa=function(){var a=this,b=this.F.F.D["ritz-DisplayCountBigsheetsWelcomeDialog"],c=b.getValue();if(1<=c)this.oua();else{b.setValue(Math.min(c+1,2147483647));var d=new Cug;this.va(d);R_(this.C,d);d.getResult().then(function(e){e?a.oua():pf(d)},function(){pf(d)})}};function evg(a){var b=new Eug("//ssl.gstatic.com/docs/spreadsheets/bigSheets_loading.gif");a.va(b);R_(a.C,b)}
function jvg(a,b,c){var d=SR(a.D);if(d&&XG(d)){var e=d.jg();iM(a.F.Ca,e).then(function(f){var h=new Btg(f,e);f=new Ttg(e,b,f,h,c,a.ma,a.bb,a.La,a.R);a.va(f);a.Ma.listen(f,"update",a.Keb);R_(a.C,f)})}}p.e8a=function(){var a=SR(this.D);a&&XG(a)&&(a=mvg(a),jvg(this,a[0],!0))};p.P1b=function(){var a=SR(this.D);a&&XG(a)&&(a=mvg(a),jvg(this,a[0],!1))};
p.e3a=function(){var a=this,b=SR(this.D);if(b&&XG(b)){var c=mvg(b),d=c.length;d=(new $z("{NUM_COLUMNS,plural, =1{\u8a08\u7b97\u3055\u308c\u305f\u5217\u3092\u524a\u9664\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f}other{\u8a08\u7b97\u3055\u308c\u305f\u5217\uff08{NUM_COLUMNS} \u5217\uff09\u3092\u524a\u9664\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f}}")).format({NUM_COLUMNS:d});QDc(this.fb,d,function(){return nvg(a,b.jg(),c)})}};
function nvg(a,b,c){c=new Xug(b,c);BK(c,function(d){a.R.C(d?36648:36649);d&&lvg(a,b)});a.ma.C(c)}p.Keb=function(a){lvg(this,a.Hr);var b=SR(this.D);b&&XG(b)&&b.jg()==a.Hr&&a.C&&(a=b.Ac(),b=Ul(new zl(a.Pf()-1,0)),XI(a,ZRb(a,b)))};function mvg(a){a=a.Ac();var b=LJ(a);return Ipc(a,b).map(function(c){return E(c,2)})}
p.uUa=function(){var a=SR(this.D);if(a&&XG(a)){var b=a.jg();if(this.L.has(b)){var c=ritz_api.BigSheetsApi.getExternalDataIdForDatasourceSheet(a.jb());if(c)if(c=AV(this.F.O,c),"fetch-successful"==c.getType()){a=a.Ac().Pf();var d=ritz_api.BigSheetsApi.getDatasourceTotalRowCount(b);c=null;null!==d&&(d=parseInt(d,10),0<d&&(c=mqc.format(d)));a=new Gug(a,c);this.va(a);R_(this.C,a);this.L.delete(b)}else"fetch-failed"==c.getType()&&(l1e(this.C)instanceof Eug&&n1e(this.C),this.L.delete(b))}}};
p.oua=function(){var a=this,b=new ttg(new Z_(dM.getInstance()),this.R);this.va(b);R_(this.C,b);b.getResult().then(function(d){a.pTa(d)},function(d){d&&a.R9();pf(b)});var c=new FK(b.getElement());oZb(c,"loadingGif","//ssl.gstatic.com/docs/spreadsheets/bigSheets_loading.gif");c.start()};p.R9=function(){this.R.C(36685);X2e("BigQuery \u306b\u63a5\u7d9a\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f")};function gvg(a,b,c){hvg(a,ritz_api.BigSheetsApi.createRefreshObjectRequest([c]),b,[c]);ivg(a,[c])}
function hvg(a,b,c,d){b=a.Ia.Pc(r5b.xa(),b);var e=(new Date).getTime();gtg(a.F.O,d);ftg(dM.getInstance(),b,a.La).then(function(f){var h=Pf(f,2),k=1==d.length?d[0]:null;!h[0].Jh().jm()&&k&&c&&(a.Oa.C[k]=new Yug(e,c));h=ja(h);for(k=h.next();!k.done;k=h.next()){var l=k.value;k=l.Jh();3===k.getState()&&(l=l.hx(),Y7b(a.F.O,new Set([l]),k))}return f},function(f){var h=Y7b,k=a.F.O,l=new Set(d);f=E(f,2,0);h(k,l,f.Jh())})}
function ivg(a,b){if(0!=b.length){var c=new $z("{numObjects,plural, =1{\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u66f4\u65b0\u3057\u3066\u3044\u307e\u3059}other{# \u500b\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u66f4\u65b0\u3057\u3066\u3044\u307e\u3059}}");xK(c.format({numObjects:b.length}));b.forEach(function(d){return a.O.add(d)})}}
function fvg(a,b){0!=a.O.size&&(b.C.forEach(function(c){var d=AV(a.F.O,c);"loading"!=d.getType()&&"fetching-results"!=d.getType()&&a.O.delete(c)}),0==a.O.size&&"dbobjectmodel-event-update"==b.getType()&&xK("\u66f4\u65b0\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f"))}p.Awb=function(a){if(a){var b=ritz_api.BigSheetsApi.getDbObjectTypeForExternalDataSourceId(a.hx());a=qtg(b,a.C);wK(a.body,a.title)}};p.Lzb=function(){Ov("https://connectedsheets.page.link/tutorial",{target:"_blank"})};function ovg(){C.call(this)}u(ovg,nK);ovg.prototype.C=function(){return dvg};tK("dbsource",ovg);
